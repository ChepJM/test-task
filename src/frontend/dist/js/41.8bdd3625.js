"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[41],{5041:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var a=n(641),l=n(33),d=n(3751),i=n(953);const o=e=>((0,a.Qi)("data-v-2733083d"),e=e(),(0,a.jt)(),e),p={class:"modal",tabindex:"-1"},s={class:"modal-content"},r=o((()=>(0,a.Lk)("hr",null,null,-1))),u={class:"data-row"},c=o((()=>(0,a.Lk)("label",{for:"name"},"Name",-1))),m={class:"data-row"},k=o((()=>(0,a.Lk)("label",{for:"description"},"Description",-1))),L={class:"data-row"},v=o((()=>(0,a.Lk)("label",{for:"parentDepartment"},"Parent department",-1))),h=o((()=>(0,a.Lk)("option",{value:null},"-",-1))),b=["selected","hidden","value"],C={class:"btns"},f=o((()=>(0,a.Lk)("i",null,null,-1))),D=o((()=>(0,a.Lk)("i",null,null,-1)));var _={__name:"DeptDetailModal",props:["dept","depts","mode"],emits:["onClose"],setup(e,{emit:t}){const n=t,o=e,_=(0,i.Kh)({name:"",description:"",parentDepartment:null});function V(){_.name?n("onSave",_):alert('Field "Name" is empty.')}return(0,a.sV)((()=>{"Add"===o.mode?(_.name="",_.description="",_.parentDepartment=null):"Edit"===o.mode&&(_.id=o.dept.id,_.name=o.dept.name,_.description=o.dept.description,_.parentDepartment=o.dept.parentDepartment)})),(e,t)=>((0,a.uX)(),(0,a.CE)("div",p,[(0,a.Lk)("div",s,[(0,a.Lk)("span",{class:"close",onClick:t[0]||(t[0]=e=>n("onClose"))},"×"),(0,a.Lk)("h1",null,(0,l.v_)(o.mode),1),r,(0,a.Lk)("div",u,[c,(0,a.bo)((0,a.Lk)("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>_.name=e)},null,512),[[d.Jo,_.name]])]),(0,a.Lk)("div",m,[k,(0,a.bo)((0,a.Lk)("input",{id:"description","onUpdate:modelValue":t[2]||(t[2]=e=>_.description=e)},null,512),[[d.Jo,_.description]])]),(0,a.Lk)("div",L,[v,(0,a.bo)((0,a.Lk)("select",{id:"parentDepartment","onUpdate:modelValue":t[3]||(t[3]=e=>_.parentDepartment=e)},[h,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.depts,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,selected:null!==o.dept.parentDepartment&&e.id===o.dept.parentDepartment.id,hidden:e.id===o.dept.id,value:e},(0,l.v_)(e.name),9,b)))),128))],512),[[d.u1,_.parentDepartment]])]),(0,a.Lk)("div",C,[(0,a.Lk)("button",{class:"save-btn",onClick:V},[f,(0,a.eW)(" Save ")]),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>n("onClose"))},[D,(0,a.eW)(" Cancel ")])])])]))}},V=n(6262);const A=(0,V.A)(_,[["__scopeId","data-v-2733083d"]]);var E=A,X=n(1250);const y=e=>((0,a.Qi)("data-v-88133f74"),e=e(),(0,a.jt)(),e),g=y((()=>(0,a.Lk)("h1",null,"Departments",-1))),w=y((()=>(0,a.Lk)("hr",null,null,-1))),I=y((()=>(0,a.Lk)("i",null,null,-1))),K={key:0,class:"dep-tbl"},F=y((()=>(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Id"),(0,a.Lk)("th",null,"Name"),(0,a.Lk)("th",null,"Description"),(0,a.Lk)("th",null,"Head department")],-1))),W=["onClick"],N=["onClick"],Q={key:1,class:"no-data"};var S={__name:"DepartmentManagement",setup(e){const t=(0,i.Kh)({data:[],selectedDept:{name:"Test",description:"Test description",parentDepartment:{name:"Parent dept"}},detailVisible:!1,mode:""});function n(){t.mode="Add",t.detailVisible=!0}function o(e){t.selectedDept=e,t.mode="Edit",t.detailVisible=!0}function p(){X.A.get("/api/department").then((e=>{t.data=e.data}))}function s(e){"Add"===t.mode?r(e):"Edit"===t.mode&&u(e)}function r(e){X.A.post("/api/department",e).then((()=>{p(),t.detailVisible=!1}))}function u(e){X.A.patch("/api/department",e).then((()=>{p(),t.detailVisible=!1}))}function c(e){X.A.delete(`/api/department?id=${e.id}`).then((e=>{e.data?p():alert("You are trying to delete department that is foreign_key for another department.")}))}return(0,a.sV)((()=>{X.A.get("/api/department").then((e=>{t.data=e.data}))})),(e,i)=>((0,a.uX)(),(0,a.CE)(a.FK,null,[g,w,(0,a.Lk)("button",{onClick:n},[I,(0,a.eW)(" Add ")]),t.data.length?((0,a.uX)(),(0,a.CE)("table",K,[F,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.data,(e=>((0,a.uX)(),(0,a.CE)("tr",{class:"data-row",key:e.id,onClick:t=>o(e)},[(0,a.Lk)("td",null,(0,l.v_)(e.id),1),(0,a.Lk)("td",null,(0,l.v_)(e.name),1),(0,a.Lk)("td",null,(0,l.v_)(e.description),1),(0,a.Lk)("td",null,(0,l.v_)(e.parentDepartment?.name||"-"),1),(0,a.Lk)("td",null,[(0,a.Lk)("span",{class:"close",onClick:(0,d.D$)((t=>c(e)),["stop"])},"×",8,N)])],8,W)))),128))])):((0,a.uX)(),(0,a.CE)("section",Q,"There are no elements.")),t.detailVisible?((0,a.uX)(),(0,a.Wv)(E,{key:2,dept:t.selectedDept,depts:t.data,mode:t.mode,onOnClose:i[0]||(i[0]=e=>t.detailVisible=!1),onOnSave:s},null,8,["dept","depts","mode"])):(0,a.Q3)("",!0)],64))}};const T=(0,V.A)(S,[["__scopeId","data-v-88133f74"]]);var U=T}}]);
//# sourceMappingURL=41.8bdd3625.js.map