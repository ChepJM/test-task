{"version":3,"file":"js/41.8bdd3625.js","mappings":"m3BAyCA,MAAMA,EAAQC,EACRC,EAAQC,EAERC,GAAQC,EAAAA,EAAAA,IAAS,CACrBC,KAAM,GACNC,YAAa,GACbC,iBAAkB,OAgBpB,SAASC,IACHL,EAAME,KACRN,EAAM,SAAUI,GAEhBM,MAAM,yBAEV,C,OAnBAC,EAAAA,EAAAA,KAAU,KACW,QAAfT,EAAMU,MACRR,EAAME,KAAO,GACbF,EAAMG,YAAc,GACpBH,EAAMI,iBAAmB,MACD,SAAfN,EAAMU,OACfR,EAAMS,GAAKX,EAAMY,KAAKD,GACtBT,EAAME,KAAOJ,EAAMY,KAAKR,KACxBF,EAAMG,YAAcL,EAAMY,KAAKP,YAC/BH,EAAMI,iBAAmBN,EAAMY,KAAKN,iBACtC,I,6hCCtDF,MAAMO,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,Q,ieC8BA,MAAMX,GAAQC,EAAAA,EAAAA,IAAS,CACrBW,KAAM,GACNC,aAAc,CACZX,KAAM,OACNC,YAAa,mBACbC,iBAAkB,CAChBF,KAAM,gBAGVY,eAAe,EACfN,KAAM,KASR,SAASO,IACPf,EAAMQ,KAAO,MACbR,EAAMc,eAAgB,CACxB,CAEA,SAASE,EAAWC,GAClBjB,EAAMa,aAAeI,EACrBjB,EAAMQ,KAAO,OACbR,EAAMc,eAAgB,CACxB,CAEA,SAASI,IACPC,EAAAA,EAAMC,IAAI,mBAAmBC,MAAMC,IACjCtB,EAAMY,KAAOU,EAASV,IAAI,GAE9B,CAEA,SAASP,EAAYK,GACA,QAAfV,EAAMQ,KACRe,EAAcb,GACU,SAAfV,EAAMQ,MACfgB,EAAiBd,EAErB,CAEA,SAASa,EAAcb,GACrBS,EAAAA,EAAMM,KAAK,kBAAmBf,GAAMW,MAAK,KACvCH,IACAlB,EAAMc,eAAgB,CAAK,GAE/B,CAEA,SAASU,EAAiBd,GACxBS,EAAAA,EAAMO,MAAM,kBAAmBhB,GAAMW,MAAK,KACxCH,IACAlB,EAAMc,eAAgB,CAAK,GAE/B,CAEA,SAASa,EAAiBjB,GACxBS,EAAAA,EAAMS,OAAQ,sBAAqBlB,EAAKD,MAAMY,MAAMC,IAC9CA,EAASV,KACXM,IAEAZ,MAAM,kFACR,GAEJ,C,OArDAC,EAAAA,EAAAA,KAAU,KACRY,EAAAA,EAAMC,IAAI,mBAAmBC,MAAMC,IACjCtB,EAAMY,KAAOU,EAASV,IAAI,GAC1B,I,m0BChDJ,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://frontend/./src/views/modal/DeptDetailModal.vue","webpack://frontend/./src/views/modal/DeptDetailModal.vue?7e7c","webpack://frontend/./src/views/mgmt/DepartmentManagement.vue","webpack://frontend/./src/views/mgmt/DepartmentManagement.vue?f4e7"],"sourcesContent":["<template>\r\n  <div class=\"modal\" tabindex=\"-1\">\r\n    <div class=\"modal-content\">\r\n      <span class=\"close\" @click=\"emits('onClose')\">&times;</span>\r\n      <h1>{{ props.mode }}</h1>\r\n      <hr>\r\n      <div class=\"data-row\">\r\n        <label for='name'>Name</label>\r\n        <input id='name' v-model='model.name'>\r\n      </div>\r\n      <div class=\"data-row\">\r\n        <label for='description'>Description</label>\r\n        <input id='description' v-model='model.description'>\r\n      </div>\r\n      <div class=\"data-row\">\r\n        <label for='parentDepartment'>Parent department</label>\r\n        <select id='parentDepartment' v-model=\"model.parentDepartment\">\r\n          <option :value=\"null\">-</option>\r\n          <template v-for=\"item in props.depts\" :key=\"item.id\">\r\n            <option :selected=\"props.dept.parentDepartment !== null && item.id === props.dept.parentDepartment.id\"\r\n                    :hidden=\"item.id === props.dept.id\"\r\n                    :value=\"item\">{{ item.name }}\r\n            </option>\r\n          </template>\r\n        </select>\r\n      </div>\r\n      <div class=\"btns\">\r\n        <button class=\"save-btn\" @click=\"saveChanges\">\r\n          <i/> Save\r\n        </button>\r\n        <button @click=\"emits('onClose')\">\r\n          <i/> Cancel\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {defineEmits, defineProps, onMounted, reactive} from 'vue';\r\n\r\nconst emits = defineEmits(['onClose']);\r\nconst props = defineProps(['dept', 'depts', 'mode']);\r\n\r\nconst model = reactive({\r\n  name: '',\r\n  description: '',\r\n  parentDepartment: null\r\n});\r\n\r\nonMounted(() => {\r\n  if (props.mode === 'Add') {\r\n    model.name = '';\r\n    model.description = '';\r\n    model.parentDepartment = null;\r\n  } else if (props.mode === 'Edit') {\r\n    model.id = props.dept.id;\r\n    model.name = props.dept.name;\r\n    model.description = props.dept.description;\r\n    model.parentDepartment = props.dept.parentDepartment;\r\n  }\r\n})\r\n\r\nfunction saveChanges() {\r\n  if (model.name) {\r\n    emits('onSave', model);\r\n  } else {\r\n    alert('Field \"Name\" is empty.');\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.modal {\r\n  position: fixed; /* Stay in place */\r\n  z-index: 1; /* Sit on top */\r\n  padding-top: 100px; /* Location of the box */\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%; /* Full width */\r\n  height: 100%; /* Full height */\r\n  overflow: auto; /* Enable scroll if needed */\r\n  background-color: rgb(0, 0, 0); /* Fallback color */\r\n  background-color: rgba(0, 0, 0, 0.4); /* Black w/ opacity */\r\n}\r\n\r\n/* Modal Content */\r\n.modal-content {\r\n  background-color: #fefefe;\r\n  margin: auto;\r\n  padding: 20px;\r\n  border: 1px solid #888;\r\n  width: 80%;\r\n}\r\n\r\n/* The Close Button */\r\n.close {\r\n  color: #aaaaaa;\r\n  float: right;\r\n  font-size: 28px;\r\n  font-weight: bold;\r\n}\r\n\r\n.close:hover,\r\n.close:focus {\r\n  color: #000;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n}\r\n\r\n.btns {\r\n  text-align: right;\r\n}\r\n\r\n.save-btn {\r\n  margin-right: 1em;\r\n}\r\n\r\n.data-row {\r\n  margin-top: 1em;\r\n}\r\n\r\nlabel {\r\n  font-weight: bold;\r\n  display: block;\r\n  width: 150px;\r\n  float: left;\r\n}\r\n\r\nlabel:after {\r\n  content: \": \"\r\n}\r\n</style>\r\n","import script from \"./DeptDetailModal.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DeptDetailModal.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DeptDetailModal.vue?vue&type=style&index=0&id=2733083d&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2733083d\"]])\n\nexport default __exports__","<template>\r\n  <h1>Departments</h1>\r\n  <hr>\r\n  <button @click=\"openAddModal\">\r\n    <i/> Add\r\n  </button>\r\n  <table class=\"dep-tbl\" v-if=\"model.data.length\">\r\n    <tr>\r\n      <th>Id</th>\r\n      <th>Name</th>\r\n      <th>Description</th>\r\n      <th>Head department</th>\r\n    </tr>\r\n    <tr class=\"data-row\" v-for=\"item in model.data\" :key=\"item.id\" @click=\"showDetail(item)\">\r\n      <td>{{ item.id }}</td>\r\n      <td>{{ item.name }}</td>\r\n      <td>{{ item.description }}</td>\r\n      <td>{{ item.parentDepartment?.name || '-' }}</td>\r\n      <td><span class=\"close\" @click.stop=\"deleteDepartment(item)\">&times;</span></td>\r\n    </tr>\r\n  </table>\r\n  <section class=\"no-data\" v-else>There are no elements.</section>\r\n  <dept-detail-modal\r\n      v-if=\"model.detailVisible\"\r\n      :dept=\"model.selectedDept\"\r\n      :depts=\"model.data\"\r\n      :mode=\"model.mode\"\r\n      @onClose=\"model.detailVisible=false\"\r\n      @onSave=\"saveChanges\"\r\n  />\r\n</template>\r\n\r\n<script setup>\r\n\r\nimport {onMounted, reactive} from \"vue\";\r\nimport DeptDetailModal from \"@/views/modal/DeptDetailModal.vue\";\r\nimport axios from \"axios\";\r\n\r\nconst model = reactive({\r\n  data: [],\r\n  selectedDept: {\r\n    name: 'Test',\r\n    description: 'Test description',\r\n    parentDepartment: {\r\n      name: 'Parent dept'\r\n    }\r\n  },\r\n  detailVisible: false,\r\n  mode: ''\r\n})\r\n\r\nonMounted(() => {\r\n  axios.get('/api/department').then((response) => {\r\n    model.data = response.data;\r\n  });\r\n})\r\n\r\nfunction openAddModal() {\r\n  model.mode = 'Add';\r\n  model.detailVisible = true;\r\n}\r\n\r\nfunction showDetail(item) {\r\n  model.selectedDept = item;\r\n  model.mode = 'Edit';\r\n  model.detailVisible = true;\r\n}\r\n\r\nfunction getDepartments() {\r\n  axios.get('/api/department').then((response) => {\r\n    model.data = response.data;\r\n  });\r\n}\r\n\r\nfunction saveChanges(dept) {\r\n  if (model.mode === 'Add') {\r\n    addDepartment(dept);\r\n  } else if (model.mode === 'Edit') {\r\n    updateDepartment(dept);\r\n  }\r\n}\r\n\r\nfunction addDepartment(dept) {\r\n  axios.post('/api/department', dept).then(() => {\r\n    getDepartments();\r\n    model.detailVisible = false;\r\n  });\r\n}\r\n\r\nfunction updateDepartment(dept) {\r\n  axios.patch('/api/department', dept).then(() => {\r\n    getDepartments();\r\n    model.detailVisible = false;\r\n  });\r\n}\r\n\r\nfunction deleteDepartment(dept) {\r\n  axios.delete(`/api/department?id=${dept.id}`).then((response) => {\r\n    if (response.data) {\r\n      getDepartments();\r\n    } else {\r\n      alert('You are trying to delete department that is foreign_key for another department.');\r\n    }\r\n  });\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.dep-tbl {\r\n  margin-top: 2em;\r\n}\r\n\r\n.no-data {\r\n  margin-top: 2em;\r\n}\r\n\r\ntr.data-row {\r\n  cursor: pointer;\r\n  background-color: transparent;\r\n}\r\n\r\ntr.data-row:hover {\r\n  background-color: #f1f1f1;\r\n}\r\n\r\n</style>\r\n","import script from \"./DepartmentManagement.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DepartmentManagement.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DepartmentManagement.vue?vue&type=style&index=0&id=88133f74&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-88133f74\"]])\n\nexport default __exports__"],"names":["emits","__emit","props","__props","model","reactive","name","description","parentDepartment","saveChanges","alert","onMounted","mode","id","dept","__exports__","data","selectedDept","detailVisible","openAddModal","showDetail","item","getDepartments","axios","get","then","response","addDepartment","updateDepartment","post","patch","deleteDepartment","delete"],"sourceRoot":""}